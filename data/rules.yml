version: "3.1"

rules:

- rule: Force project selection always
  condition:
    - slot_was_set:
        - project: null
  steps:
    - action: utter_ask_project



- rule: Handle project selection
  steps:
    - intent: switch_project
    - action: action_set_project


- rule: Reset project
  steps:
    - intent: reset_project
    - action: action_reset_project



# -------------------- FORGET PASSWORD --------------------

- rule: Forget password - Panchayat
  condition:
    - slot_was_set:
        - project: panchayat
  steps:
    - intent: forget_password
    - action: utter_forget_password_panchayat

- rule: Forget password - IMS
  condition:
    - slot_was_set:
        - project: ims
  steps:
    - intent: forget_password
    - action: utter_forget_password_ims

- rule: Forget password - No project selected
  condition:
    - slot_was_set:
        - project: null
  steps:
    - intent: forget_password
    - action: utter_ask_project


#-------------------------------------------------------
# great
- rule: greet - No project selected
  condition:
    - slot_was_set:
        - project: null
  steps:
    - intent: greet
    - action: utter_ask_project






# -----------------------------------------
# geo fence problem

- rule: Start Geo Fencing Flow
  condition:
    - slot_was_set:
        - project: panchayat
  steps:
    - intent: geo_fence
    - action: utter_geo_fence


- rule: geo problem - No project selected
  condition:
    - slot_was_set:
        - project: null
  steps:
    - intent: geo_fence
    - action: utter_ask_project

- rule: geo problem - other project selected
  condition:
    - slot_was_set:
        - project: ims
  steps:
    - intent: geo_fence
    - action: utter_project_mismatch


- rule: User is inside Panchayat Bhawan
  steps:
    - intent: affirm
    - action: utter_inside_yes


- rule: Problem Solved
  steps:
    - intent: problem_solved
    - action: utter_thanks



- rule: Problem not solved
  steps:
    - intent: problem_not_solved
    - action: utter_update_data
    - action: utter_thanks



- rule: User outside Panchayat Bhawan
  steps:
    - intent: deny
    - action: utter_inside_no
    - action: utter_thanks







# -----------------------------------------
# Ask face match flow

- rule: Ask face match (only when panchayat project selected)
  condition:
    - slot_was_set:
        - project: panchayat
  steps:
    - intent: ask_face_match
    - action: utter_ask_face_match


- rule: Ask face match if project not select
  condition:
    - slot_was_set:
        - project: null
  steps:
    - intent: ask_face_match
    - action: utter_ask_project


- rule: Ask face match if project not select related
  condition:
    - slot_was_set:
        - project: ims
  steps:
    - intent: ask_face_match
    - action: utter_project_mismatch


- rule: Image is showing
  steps:
    - intent: image_show
    - action: utter_image_show


- rule: Image not showing
  steps:
    - intent: image_not_show
    - action: utter_image_not_show
    - action: utter_thanks


- rule: Face match success (status 1)
  steps:
    - intent: face_status_1
    - action: utter_face_status_1
    - action: utter_thanks


- rule: Face match failed (status 0)
  steps:
    - intent: face_status_0
    - action: utter_face_status_0
    - action: utter_thanks




#--------------------------------------------------------------------------
# network problem

- rule: ask network problem in panchayat gateway
  condition:
    - slot_was_set:
        - project: panchayat
  steps:
    - intent: ask_network_issue
    - action: action_ask_network_issue

- rule: ask network problem if project null
  condition:
    - slot_was_set:
        - project: null
  steps:
    - intent: ask_network_issue
    - action: utter_ask_project

- rule: ask network problem if project other
  condition:
    - slot_was_set:
        - project: ims
  steps:
    - intent: ask_network_issue
    - action: utter_project_mismatch






#-----------------------------------------------------------------------
# qr problem geo panchayat gateway

- rule: qr issue
  condition:
    - slot_was_set:
        - project: panchayat
  steps:
    - intent: ask_qr
    - action: utter_ask_qr

- rule: qr issue when no project select
  condition:
    - slot_was_set:
        - project: null
  steps:
    - intent: ask_qr
    - action: utter_ask_project

- rule: qr not allowed when project is not panchayat
  condition:
    - slot_was_set:
        - project: ims
  steps:
    - intent: ask_qr
    - action: utter_project_mismatch


- rule: qr show
  steps:
    - intent: qr_show
    - action: utter_qr_show

- rule: qr not show
  steps:
    - intent: qr_not_show
    - action: utter_qr_not_show